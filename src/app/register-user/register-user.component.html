<app-header></app-header>

<!-- <p>register-user works!</p> -->

<div class="container-fluid center mx-0 px-2 mt-3 mb-3">
  <div id="caps" class="jumbotron jumbotron-fluid py-3 mb-3 pt-3" style="background-color:rgba(49, 49, 49, 0.50); ">
      <!-- <div class="container-fluid p-0 m-0"> -->
            <h4 class="display-4 p-0" style="color:aliceblue; font-size: xx-large; margin-left: 20px;">Registration</h4>
            <p class="lead pb-0 mb-0" style="color:aliceblue; margin-left:25px">Register as new user</p>
          <!-- </div> -->
        </div>
  </div>

<div *ngIf="!registered" class="container p-3 mb-3 " id="register">

  <img [src]="regUserImgSanitized" class=" img-fluid p-0 mr-2 mb-3 mx-auto d-block rounded-circle border border-dark" style="min-height: 200px; min-width: 200px; height:100%; width:100%; max-height: 200px; max-width: 200px;" >
  <div class="d-flex align-items-center w-50 mx-auto d-block mb-3">
  <div class="custom-file ">
    <input (change)="changeListener($event);" type="file" class="custom-file-input" id="customFile">
    <label style="color: grey!important;" class="custom-file-label" for="customFile">Change profile image</label>

  </div>
    <button class="ml-2 btn btn-danger" (click)="removeImg()"><i class="fa fa-times"></i></button>
  </div>

  <form class="needs-validation" novalidate method=post
  oninput='passw2.setCustomValidity(passw1.value != passw2.value ? "Passwords do not match." : "")'>
    <div class="form-row">
      <div class="col-md-4 mb-3">
        <label for="validationCustom01">First name</label>
        <input type="text" [(ngModel)]="regName" #firstName name="fname" class="form-control" id="validationCustom01" placeholder="First name" required>
        <div class="valid-feedback">
          Looks good!
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <label for="validationCustom02">Surname</label>
        <input type="text" [(ngModel)]="regSurname" #surn name="surname" class="form-control" id="validationCustom02" placeholder="Surname" value="" required>
        <div class="valid-feedback">
          Looks good!
        </div>
      </div>

    </div>

    <div class="form-row">
    <div class="col-md-4 mb-3">

      <div class="container ml-0 pl-0 pb-0" >
      <mat-form-field class="example-full-width px-2 ml-0 pt-2 pb-0" id="wrap" style=" height:62px">
        <input matInput [matDatepicker]="picker" (dateChange)="setDob($event)" placeholder="Date of birth">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      </div>


      <div class="valid-feedback">
        Looks good!
      </div>
    </div>
</div>


    <div class="form-row">
      <div class="col-md-4 mb-3">
        <label for="validationCustomUsername">Username</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupPrepend">@</span>
          </div>
          <input type="text" [(ngModel)]="regUsername" #usern name="username" class="form-control" id="validationCustomUsername" placeholder="Username" aria-describedby="inputGroupPrepend" required>
          <div class="invalid-feedback">
            Please choose a username.
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <label for="validationCustomUsername">Password</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupPrepend"><i class="fa fa-key"></i></span>
          </div>
          <input type="password" [(ngModel)]="regPassword" #pwd name="passw1" class="form-control" id="validationCustomUsername" placeholder="Password" aria-describedby="inputGroupPrepend" required>
          <div class="invalid-feedback">
            Please choose a password.
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <label for="validationCustomUsername">Confirm password</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupPrepend"><i class="fa fa-key"></i></span>
          </div>
          <input type="password" #pwd2 name="passw2" class="form-control" id="validationCustomUsername" placeholder="Password" aria-describedby="inputGroupPrepend" required>
          <div class="invalid-feedback">
            Please confirm password and check that is matching.
          </div>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="col-md-4 mb-3">
        <label for="validationCustom03">Address</label>
        <input type="text" [(ngModel)]="regAddress" #addr name="address" class="form-control" id="validationCustom03" placeholder="Address" required>
        <div class="invalid-feedback">
          Please provide a valid address.
        </div>
      </div>
      <div class="col-md-4 mb-3">
        <label for="validationCustom04">E-mail</label>
        <input type="text" [(ngModel)]="regEmail" #em name="email" class="form-control" id="validationCustom04" placeholder="E-mail" required>
        <div class="invalid-feedback">
          Please provide a valid email.
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <label for="validationCustom05">Phone number</label>
        <input type="text" [(ngModel)]="regPhone" #ph name="phone" class="form-control" id="validationCustom05" placeholder="Phone">
        <div class="invalid-feedback">
          Please provide a valid phone number.
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <label for="validationCustom06">User role</label>
        <select (change)=setRole(role.value) #role value="SELLER" class="form-control">
          <option value="SELLER">Seller</option>
          <option value="ADMIN">Administrator</option>
          <option value="CUSTOMER">Customer</option>
        </select>
      </div>
    </div>
    <!-- <div class="form-group">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
        <label class="form-check-label" for="invalidCheck">
          Agree to terms and conditions
        </label>
        <div class="invalid-feedback">
          You must agree before submitting.
        </div>
      </div>
    </div> -->
    <hr>
    <div class="d-flex flex-row-reverse">

      <button (click)="validateAndRegister()" class="ml-3 btn btn-primary mt-1" type="submit">Register</button>
      <button class="btn btn-light mt-1" href="" [routerLink]="['']">Cancel</button>
    </div>

  </form>

    <div class="alert alert-danger mt-3" role="alert" *ngIf="alreadyExists" >
      Selected username already exists.
    </div>

 <!-- {{regName}}
 {{regSurname}}
 {{regUsername}}
 {{regPassword}}
 {{regAddress}}
 {{regEmail}}
 {{regPhone}}
 {{regRole}} -->

</div>


<div *ngIf="registered" class="container p-3 " id="register">
  <div class="alert alert-success" role="alert" >
    <i class="fa fa-user mr-2"></i>Registration successful
  </div>
  <button class="btn btn-primary mt-4" href="" [routerLink]="['']">Go to login</button>

</div>
